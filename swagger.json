{
  "openapi": "3.0.0",
  "info": {
    "title": "API Gestión DSW",
    "version": "1.0.0",
    "description": "Documentación de la API para el sistema de gestión de ventas, stock y empleados."
  },
  "servers": [
    {
      "url": "http://localhost:3500",
      "description": "Servidor Local"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/auth/login": {
      "post": {
        "summary": "Iniciar sesión",
        "security": [],
        "tags": ["Autenticación"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "example": "usuario" },
                  "password": { "type": "string", "example": "pass" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Login exitoso, devuelve token" },
          "401": { "description": "Credenciales incorrectas" }
        }
      }
    },
    "/auth/reset-direct": {
      "post": {
        "summary": "Restablecer contraseña (Directo)",
        "security": [],
        "tags": ["Autenticación"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string" },
                  "newPassword": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Contraseña actualizada" },
          "404": { "description": "Usuario no encontrado" }
        }
      }
    },
    "/ventas": {
      "get": {
        "summary": "Obtener historial de ventas paginado",
        "tags": ["Ventas"],
        "parameters": [
          { "name": "filtro", "in": "query", "schema": { "type": "string" } },
          { "name": "pagina", "in": "query", "schema": { "type": "integer", "default": 0 } },
          { "name": "limite", "in": "query", "schema": { "type": "integer", "default": 20 } }
        ],
        "responses": {
          "200": { "description": "Lista de ventas y paginación" }
        }
      }
    },
    "/ventas/crearVenta": {
      "post": {
        "summary": "Registrar una nueva venta",
        "tags": ["Ventas"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "montoTotal": { "type": "number" },
                  "DNIEmpleado": { "type": "string" },
                  "idCliente": { "type": "integer" },
                  "productos": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "idProducto": { "type": "integer" },
                        "cantidadVendida": { "type": "integer" },
                        "subtotal": { "type": "number" }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Venta creada exitosamente" }
        }
      }
    },
    "/detalle_ventas/{idVenta}": {
      "get": {
        "summary": "Obtener detalle de una venta",
        "tags": ["Ventas"],
        "parameters": [
          { "name": "idVenta", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": { "description": "Detalle de productos de la venta" }
        }
      }
    },
    "/stock": {
      "get": {
        "summary": "Obtener lista de productos (Stock)",
        "tags": ["Stock"],
        "parameters": [
          { "name": "producto", "in": "query", "description": "Nombre del producto a buscar", "schema": { "type": "string" } },
          { "name": "pagina", "in": "query", "schema": { "type": "integer" } },
          { "name": "limite", "in": "query", "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": { "description": "Lista de productos" }
        }
      },
      "post": {
        "summary": "Crear nuevo producto",
        "tags": ["Stock"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "articulo": { "type": "string" },
                  "descripcion": { "type": "string" },
                  "cantidad": { "type": "integer" },
                  "monto": { "type": "number" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Producto creado" }
        }
      }
    },
    "/stock/{id}": {
      "put": {
        "summary": "Actualizar producto",
        "tags": ["Stock"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "articulo": { "type": "string" },
                  "descripcion": { "type": "string" },
                  "cantidad": { "type": "integer" },
                  "monto": { "type": "number" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Producto actualizado" }
        }
      }
    },
    "/stockelim/{id}": {
      "put": {
        "summary": "Cambiar estado de producto (Borrado lógico)",
        "tags": ["Stock"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "estado": { "type": "string", "example": "Disponible" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Estado cambiado" }
        }
      }
    },
    "/clientes": {
      "get": {
        "summary": "Listar clientes",
        "tags": ["Clientes"],
        "parameters": [
          { "name": "nombre", "in": "query", "schema": { "type": "string" } }
        ],
        "responses": {
          "200": { "description": "Lista de clientes" }
        }
      },
      "post": {
        "summary": "Crear cliente",
        "tags": ["Clientes"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "dni": { "type": "string" },
                  "nombre_apellidoCli": { "type": "string" },
                  "direccion": { "type": "string" },
                  "contacto": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Cliente creado" }
        }
      }
    },
    "/empleados": {
      "get": {
        "summary": "Listar empleados",
        "tags": ["Empleados"],
        "parameters": [
          { "name": "nombre", "in": "query", "schema": { "type": "string" } }
        ],
        "responses": {
          "200": { "description": "Lista de empleados" }
        }
      },
      "post": {
        "summary": "Crear empleado",
        "tags": ["Empleados"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "DNI_CUIL": { "type": "string" },
                  "nombre_apellidoEmp": { "type": "string" },
                  "contacto": { "type": "string" },
                  "sucursal": { "type": "integer" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Empleado creado" }
        }
      }
    },
    "/sucursales": {
      "get": {
        "summary": "Listar sucursales",
        "tags": ["Sucursales"],
        "parameters": [
          { "name": "filtro", "in": "query", "schema": { "type": "string" } }
        ],
        "responses": {
          "200": { "description": "Lista de sucursales" }
        }
      }
    }
  }
}